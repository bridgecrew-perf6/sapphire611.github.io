(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{551:function(t,n,s){"use strict";s.r(n);var a=s(4),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_2-17-work-note"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-17-work-note"}},[t._v("#")]),t._v(" 2/17 Work Note")]),t._v(" "),s("p",[t._v("今天被 cwj 秀了一脸，特此记录")]),t._v(" "),s("div",{staticClass:"custom-block right"},[s("p",[t._v("Goto his blog >> "),s("a",{attrs:{href:"https://github.com/CanMusic/me/issues",target:"_blank",rel:"noopener noreferrer"}},[t._v("CanMusic"),s("OutboundLink")],1)])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"ubantu-部署实战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubantu-部署实战"}},[t._v("#")]),t._v(" Ubantu 部署实战")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx -v")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx version: nginx/1.18.0 (Ubuntu) 老版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /etc/nginx/ "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx目录在此")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"/img/ls.png",alt:"img"}})]),t._v(" "),s("blockquote",[s("p",[t._v("查看 主配置文件 nginx.conf")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("user www-data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nworker_processes auto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npid /run/nginx.pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninclude /etc/nginx/modules-enabled/*.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nevents "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        worker_connections "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("768")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# multi_accept on;")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhttp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 省略...")]),t._v("\n        \n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Virtual Host Configs")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##")]),t._v("\n\n        include /etc/nginx/conf.d/*.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里有两个include目录,第一个是conf.d下的所有conf配置文件")]),t._v("\n        include /etc/nginx/sites-enabled/*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 第二个是sites-enabled 下的所有文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("blockquote",[s("p",[t._v("进入 conf.d 目录创建自定义配置文件")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" conf.d/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" default.conf "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# touch 是新建文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" default.conf\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default.conf")]),t._v("\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  _"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        root /app/health"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass http://127.0.0.1:19008/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("nginx -t\nnginx: the configuration "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" /etc/nginx/nginx.conf syntax is ok\n\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("230")])])])])])}),[],!1,null,null,null);n.default=e.exports}}]);